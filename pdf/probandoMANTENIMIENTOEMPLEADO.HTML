




<div class="wrapper">
  <div class="main_container">
    <div style="padding-left: 5%; padding-right: 5%;" class="col col-sm-12 col-md-12 col-lg-12 container-fluid">    
      <div class="panel">
          <div class="panel-heading" style="text-align: center;">
            <h4 class="panel-title" style="font-weight:100">Instituto Tecnológico de Mexicali</h4>
            <h4 class="panel-title"  style="font-weight:100">Bolsa de trabajo</h4>
            <h4 class="panel-title" style="font-weight:100">Mantenimiento Empleado</h4>
          </div>
        </div>

        <div class="tabla">
          <table id="basic-table" class="table table-striped">
              <thead>
              <tr>
                  <th>No Control</th>
                  <th>Numero de Seguro Social</th>
                  <th>Nombre</th>
                  <th>Sexo</th>
                  <th>Fecha de Nacimiento</th>
                  <th>Telefóno</th>
                  <th>Fecha Ingreso</th>
                  <th>Horario Entrada y Salida</th>
                  <th>Dias</th>
                  <th>Puesto</th>
                  <th>Estatus</th>
                  <th>Cursos</th>
                  <th>Observaciones</th>
              </tr>
              </thead>
              <tbody id="myTable">
              </tbody>
          </table>
      </div>


      <div class="buttom">
        <a class="btn btn-success form-group" id="btnExport" >Export PDF</a>
      </div>

    </div>
  </div>
</div>
<script>
    const api_url = "http://localhost:5000/api/mantenimientoEmpleado"; 

    // Defining async function 
    async function getapi(url) { 
        // Storing response 
        const response = await fetch(url); 
        // Storing data in form of JSON 
        var data = await response.json(); 
        buildTable(data); 
    } 
    getapi(api_url); 

        function buildTable(data) {
            var table = document.getElementById('myTable');

            for(var i =0; i<data.length; i++) {
                console.log("la data es"+data[i]);
                var row =`<tr>
                    <td>${data[i].no_control}</td>
                    <td>${data[i].no_seguro_social}</td>
                    <td>${data[i].nombre} ${data[i].ap_paterno} ${data[i].ap_materno}</td>
                    <td>${data[i].sexo}</td>
                    <td>${data[i].f_nacimiento}</td>
                    <td>${data[i].telefono}</td>
                    <td>${data[i].fecha_ingreso}</td>
                    <td>${data[i].horario_entrada} - ${data[i].horario_salida}</td>
                    <td>${data[i].dias_semana}</td>
                    <td>${data[i].puesto}</td>
                    <td>${data[i].estatus}</td>
                    <td>Curso 1: ${data[i].nombre_curso1}<br>Curso 2: ${data[i].nombre_curso2}</td>
                    <td>${data[i].observaciones}</td>
                    </tr> `
                table.innerHTML+=row
            }
        } 
    </script>

<script src="jspdf.min.js"></script>
<script src="jspdf.plugin.autotable.min.js"></script>

<!-- jsPDF library -->
<script src="js/jsPDF/dist/jspdf.min.js"></script>
<script src="/pdf/exportando.js"></script>