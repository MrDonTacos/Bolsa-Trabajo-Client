<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../menubar/styles.css">
    <link href="https://kendo.cdn.telerik.com/2020.3.1118/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="https://kendo.cdn.telerik.com/2020.3.1118/styles/kendo.default.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2020.3.1118/js/kendo.all.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/dc950c8c58.js"></script>
    <link rel="stylesheet" href="/menubar/styles.css">
    <link rel="stylesheet" href="/pdf/estiloPDF.css">
  <!-- No eliminar si no no exporta -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.2.61/jspdf.debug.js"></script>
  <script>if (window.define) delete window.define.amd;</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.0.28/jspdf.plugin.autotable.js"></script>
  <!-- jQuery library -->
  <script src="js/jquery.min.js"></script>
  <!-- jsPDF library -->
  <script src="js/jsPDF/dist/jspdf.min.js"></script>
</head>
<style>

</style>
<body>
  <nav class="navbar navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <div class="form-group row col-sm-12">
    <div class="collapse col-sm-2" id="navbarToggleExternalContent">
    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    </div>
  </div>

      <div class="col-sm-8" id="menu">
        <div class="wrapper">
          <div class="main_container">
            <div style="padding-left: 10%;" class="col col-sm-12 col-md-12 col-lg-12 container-fluid">    
              <div class="panel">
                  <div class="panel-heading" style="text-align: center;">
                    <h4 class="panel-title" style="font-weight:100">Instituto Tecnológico de Mexicali</h4>
                    <h4 class="panel-title"  style="font-weight:100">Bolsa de trabajo</h4>
                    <h4 class="panel-title" style="font-weight:100">Mantenimiento Empleado</h4>
                  </div>
              </div>
              <div class="tabla">
                <table id="basic-table" class="table table-striped">
                    <thead>
                    <tr>
                      <th>No Control</th>
                      <th>Numero de Seguro Social</th>
                      <th>Nombre</th>
                      <th>Sexo</th>
                      <th>Fecha de Nacimiento</th>
                      <th>Telefóno</th>
                      <th>Fecha Ingreso</th>
                      <th>Horario Entrada y Salida</th>
                      <th>Dias</th>
                      <th>Puesto</th>
                      <th>Estatus</th>
                      <th>Cursos</th>
                      <th>Observaciones</th>
                    </tr>
                    </thead>
                    <tbody id="myTable">
                      <script>
                        const api_url = "http://localhost:5000/api/mantenimientoEmpleado"; 
                        async function getapi(url) { 
                            const response = await fetch(url); 
                            var data = await response.json(); 
                            buildTable(data); 
                        } 
                        getapi(api_url); 
                        function buildTable(data) {
                          var table = document.getElementById('myTable');
                          for(var i =0; i<data.length; i++) {
                              console.log("la data es"+data[i]);
                              var row =`<tr>
                                <td>${data[i].no_control}</td>
                                <td>${data[i].no_seguro_social}</td>
                                <td>${data[i].nombre} ${data[i].ap_paterno} ${data[i].ap_materno}</td>
                                <td>${data[i].sexo}</td>
                                <td>${data[i].f_nacimiento}</td>
                                <td>${data[i].telefono}</td>
                                <td>${data[i].fecha_ingreso}</td>
                                <td>${data[i].horario_entrada} - ${data[i].horario_salida}</td>
                                <td>${data[i].dias_semana}</td>
                                <td>${data[i].puesto}</td>
                                <td>${data[i].estatus}</td>
                                <td>Curso 1: ${data[i].nombre_curso1}<br>Curso 2: ${data[i].nombre_curso2}</td>
                                <td>${data[i].observaciones}</td>
                                </tr> `
                              table.innerHTML+=row
                          }
                        } 
                        </script>
                    </tbody>
                </table>
              </div>
              <div class="buttom" >
                <a class="btn btn-success form-group" id="btnExport" >Export PDF</a>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>

</body>
</html>
<script src="../Javascript/dsKendo/helper.js"></script>
<script src="../navBar/Menu.js"></script>

<script src="jspdf.min.js"></script>
<script src="jspdf.plugin.autotable.min.js"></script>
<!-- jsPDF library -->
<script src="js/jsPDF/dist/jspdf.min.js"></script>
<script src="/pdf/exportando.js"></script>