<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/pdf/estiloPDF.css">
    <!-- <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js'></script> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">    <link rel="stylesheet" href="Styles/style.css">
    <link href="styles/kendo.default-v2.min.css" rel="stylesheet" />
    <link href="https://kendo.cdn.telerik.com/2020.3.1021/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="https://kendo.cdn.telerik.com/2020.3.1021/styles/kendo.default.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2020.3.1021/js/kendo.all.min.js"></script>
    <!--PARA EL QUERY-->
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/themes/redmond/jquery-ui.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>
    <!--QUIZAS NO SIRVEN, PERO POR SI LAS DUDAS-->
    <link rel="stylesheet" href="alert/dist/sweetalert.css">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script> <!--SRC DE LOS ALERT-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.2.61/jspdf.debug.js"></script>
    <!-- EDIT: For now, add this line between the libraries -->
    <!-- The reason being that jspdf includes a version of requirejs which -->
    <!-- jspdf-autotable currently is not expecting. You can also use version < 2.0.21 -->
    <script>if (window.define) delete window.define.amd;</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.0.28/jspdf.plugin.autotable.js"></script>

    <title>Mantenimiento Empleado</title>
</head>
<body>
    <div class="header">
        <div class="panel-heading" style="text-align: center;">
            <h4 class="panel-title" style="font-weight:100">Instituto Tecnológico de Mexicali</h4>
            <h4 class="panel-title"  style="font-weight:100">Bolsa de trabajo</h4>
            <h4 class="panel-title" style="font-weight:100">Mantenimiento Bolsa</h4>
        </div>
    </div>

    <div class="tabla">
        <table id="basic-table" class="table table-striped">
            <thead>
            <tr>
                <th>No Control</th>
                <th>Numero de Seguro Social</th>
                <th>Nombre</th>
                <th>Sexo</th>
                <th>Fecha de Nacimiento</th>
                <th>Telefóno</th>
                <th>Fecha Ingreso</th>
                <th>Horario Entrada y Salida</th>
                <th>Dias</th>
                <th>Puesto</th>
                <th>Estatus</th>
                <th>Cursos</th>
                <th>Observaciones</th>
            </tr>
            </thead>
            <tbody id="myTable">
            </tbody>
        </table>
    </div>
    <div class="buttom">
        <a class="btn btn-success form-group" id="btnExport" >Export PDF</a>
    </div>

    <script>
        const api_url = "http://localhost:5000/api/mantenimientoEmpleado"; 

        // Defining async function 
        async function getapi(url) { 
        	// Storing response 
            const response = await fetch(url); 
        	// Storing data in form of JSON 
            var data = await response.json(); 
            buildTable(data); 
        } 
        getapi(api_url); 

            function buildTable(data) {
                var table = document.getElementById('myTable');

                for(var i =0; i<data.length; i++) {
                    console.log("la data es"+data[i]);
                    var row =`<tr>
                        <td>${data[i].no_control}</td>
                        <td>${data[i].no_seguro_social}</td>
                        <td>${data[i].nombre} ${data[i].ap_paterno} ${data[i].ap_materno}</td>
                        <td>${data[i].sexo}</td>
                        <td>${data[i].f_nacimiento}</td>
                        <td>${data[i].telefono}</td>
                        <td>${data[i].fecha_ingreso}</td>
                        <td>${data[i].horario_entrada} - ${data[i].horario_salida}</td>
                        <td>${data[i].dias_semana}</td>
                        <td>${data[i].puesto}</td>
                        <td>${data[i].estatus}</td>
                        <td>Curso 1: ${data[i].nombre_curso1}<br>Curso 2: ${data[i].nombre_curso2}</td>
                        <td>${data[i].observaciones}</td>
                        </tr> `
                    table.innerHTML+=row
                }
            } 
        </script>
    </body>
    <script src="/pdf/exportando.js"></script>
</html>